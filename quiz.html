<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>职业价值观测评</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* 欢迎页面 */
        #welcomePage {
            background: white;
            border-radius: 20px;
            padding: 60px 40px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-top: 100px;
            animation: fadeIn 1s ease-in;
        }

        h1 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        p {
            margin-bottom: 30px;
            line-height: 1.6;
            color: #666;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .btn:active {
            transform: translateY(0);
            animation: pulse 0.3s ease;
        }

        /* 答题页面 */
        #quizPage {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-top: 50px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s ease;
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .question-text {
            font-size: 1.3em;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .options {
            margin-bottom: 60px;
        }

        .rating-scale {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            position: relative;
            width: 100%;
        }

        .rating-scale::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 150px;
            right: 150px;
            height: 2px;
            background: #e0e0e0;
            transform: translateY(-50%);
            z-index: 1;
        }

        .rating-label {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
            font-weight: bold;
            white-space: nowrap;
            z-index: 3;
        }

        .rating-label.agree {
            left: 0;
            color: #27ae60;
        }

        .rating-label.disagree {
            right: 0;
            color: #9b59b6;
        }

        .rating-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            position: relative;
            z-index: 2;
            margin: 0 120px;
        }

        .rating-btn {
            width: 60px;
            height: 60px;
            border: 3px solid #27ae60;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0;
            position: relative;
            color: #27ae60;
        }

        .rating-btn::after {
            content: '✔';
            position: absolute;
            font-size: 30px;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .rating-btn:hover {
            background-color: currentColor;
            transform: scale(1.1);
        }

        .rating-btn:hover::after {
            opacity: 1;
        }

        .rating-btn.selected {
            background-color: currentColor;
        }

        .rating-btn.selected::after {
            opacity: 1;
        }

        /* 评分从左到右为7-1 */
        /* 第1个按钮 - 分数7 */
        .rating-btn:nth-child(1) {
            width: 60px;
            height: 60px;
            border-color: #27ae60;
            color: #27ae60;
        }

        /* 第2个按钮 - 分数6 */
        .rating-btn:nth-child(2) {
            width: 50px;
            height: 50px;
            border-color: #27ae60;
            color: #27ae60;
        }

        /* 第3个按钮 - 分数5 */
        .rating-btn:nth-child(3) {
            width: 40px;
            height: 40px;
            border-color: #27ae60;
            color: #27ae60;
        }

        /* 第4个按钮 - 分数4 */
        .rating-btn:nth-child(4) {
            width: 30px;
            height: 30px;
            border-color: #9E9E9E;
            color: #9E9E9E;
        }

        /* 第5个按钮 - 分数3 */
        .rating-btn:nth-child(5) {
            width: 40px;
            height: 40px;
            border-color: #9b59b6;
            color: #9b59b6;
        }

        /* 第6个按钮 - 分数2 */
        .rating-btn:nth-child(6) {
            width: 50px;
            height: 50px;
            border-color: #9b59b6;
            color: #9b59b6;
        }

        /* 第7个按钮 - 分数1 */
        .rating-btn:nth-child(7) {
            width: 60px;
            height: 60px;
            border-color: #9b59b6;
            color: #9b59b6;
        }

        /* 调整对号大小 */
        .rating-btn:nth-child(1)::after, .rating-btn:nth-child(7)::after {
            font-size: 30px;
        }

        .rating-btn:nth-child(2)::after, .rating-btn:nth-child(6)::after {
            font-size: 24px;
        }

        .rating-btn:nth-child(3)::after, .rating-btn:nth-child(5)::after {
            font-size: 18px;
        }

        .rating-btn:nth-child(4)::after {
            font-size: 14px;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
            box-shadow: none;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* 结果页面 */
        #resultPage {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-top: 50px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: none;
            animation: fadeInUp 1s ease-out;
        }

        .result-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .result-title {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .values-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 40px;
        }

        .value-item {
            background: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 100%);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
            animation: slideInLeft 0.5s ease-out;
            opacity: 0;
            transform: translateX(-20px);
        }

        .value-item:nth-child(1) { animation-delay: 0.2s; animation-fill-mode: forwards; }
        .value-item:nth-child(2) { animation-delay: 0.4s; animation-fill-mode: forwards; }
        .value-item:nth-child(3) { animation-delay: 0.6s; animation-fill-mode: forwards; }

        .value-name {
            color: #667eea;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .value-score {
            color: #764ba2;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .value-description {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .value-suggestions {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }

        .suggestion-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #666;
        }

        .suggestion-list {
            list-style-type: disc;
            margin-left: 20px;
            line-height: 1.5;
        }

        /* 动画 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInLeft {
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            #welcomePage, #quizPage, #resultPage {
                padding: 20px;
                margin-top: 20px;
            }

            h1 {
                font-size: 2em;
            }

            .question-text {
                font-size: 1.1em;
            }

            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }

            .btn {
                width: 100%;
            }

            .rating-scale::before {
                left: 80px;
                right: 80px;
            }

            .rating-label {
                font-size: 1em;
            }

            .rating-buttons {
                gap: 15px;
                margin: 0 100px;
            }

            .rating-btn {
                width: 50px;
                height: 50px;
            }

            .rating-btn:nth-child(1), .rating-btn:nth-child(7) {
                width: 50px;
                height: 50px;
            }

            .rating-btn:nth-child(2), .rating-btn:nth-child(6) {
                width: 40px;
                height: 40px;
            }

            .rating-btn:nth-child(3), .rating-btn:nth-child(5) {
                width: 35px;
                height: 35px;
            }

            .rating-btn:nth-child(4) {
                width: 30px;
                height: 30px;
            }
        }

        @media (max-width: 480px) {
            .rating-scale::before {
                left: 60px;
                right: 60px;
            }

            .rating-buttons {
                margin: 0 80px;
                gap: 10px;
            }

            .rating-label {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 欢迎页面 -->
        <div id="welcomePage">
            <h1>职业价值观测评</h1>
            <p>欢迎您参加本次职业价值观测评！</p>
				<p>本测评将帮助您了解自己最看重的3项职业价值观，为您的职业发展提供参考。</p>
            <p>测评包含25道题目，预计需要3-5分钟完成。请根据您的真实想法进行选择。</p>
            <button class="btn" onclick="startQuiz()">开始答题</button>
        </div>

        <!-- 答题页面 -->
        <div id="quizPage">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="question-number" id="questionNumber">第1题 / 共25题</div>
            <div class="question-text" id="questionText"></div>
            <div class="options" id="options"></div>
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="previousQuestion()">上一题</button>
                <button class="btn" onclick="nextQuestion()" id="nextBtn">下一题</button>
            </div>
        </div>

        <!-- 结果页面 -->
        <div id="resultPage">
            <div class="result-header">
                <h1 class="result-title">您的职业价值观测评结果</h1>
                <p>根据您的答题情况，以下是您最看重的前3项职业价值观：</p>
            </div>
            <div class="values-list" id="valuesList"></div>
            <div style="text-align: center; margin-top: 40px;">
                <button class="btn" onclick="restartQuiz()">重新测评</button>
            </div>
        </div>
    </div>

    <script>
        // 职业价值观定义
        const values = {
            平衡生活: { 
                description: "您重视工作与生活的平衡，希望有足够的时间陪伴家人和享受个人生活。", 
                suggestions: ["选择朝九晚五、工作时间规律的职业", "考虑远程工作或灵活工作制", "避免长期加班的高强度职业"] 
            },
            独立自主: { 
                description: "您希望在工作中能够自主决策，不受过多限制，按照自己的方式完成任务。", 
                suggestions: ["选择需要独立工作的职业，如自由职业者、创业者", "考虑科研、设计等创造性工作", "避免高度规范化、流程化的职业"] 
            },
            成长发展: { 
                description: "您重视在工作中不断学习和成长，希望能够提升自己的能力和知识。", 
                suggestions: ["选择有完善培训体系的企业", "考虑教育、咨询等需要持续学习的职业", "寻找有晋升空间的职业"] 
            },
            工作稳定: { 
                description: "您希望工作稳定，有安全感，不喜欢频繁变动。", 
                suggestions: ["选择公务员、事业单位等稳定职业", "考虑大型企业、国有企业", "避免初创公司或高风险行业"] 
            },
            他人认可: { 
                description: "您希望在工作中获得他人的认可和赞赏，重视社会地位和声誉。", 
                suggestions: ["选择需要与人打交道的职业，如销售、公关", "考虑教育、医疗等受人尊重的职业", "寻找重视员工成就的企业"] 
            },
            公平公正: { 
                description: "您重视工作环境的公平公正，希望得到平等的对待和机会。", 
                suggestions: ["选择制度完善、管理规范的企业", "考虑法律、人力资源等职业", "避免人际关系复杂、潜规则多的行业"] 
            },
            工作环境: { 
                description: "您重视工作环境的舒适度和便利性，包括办公条件、地理位置等。", 
                suggestions: ["选择办公环境好的企业", "考虑总部位于城市中心的公司", "避免工作环境艰苦的职业"] 
            },
            人际拓展: { 
                description: "您希望在工作中能够拓展人脉，认识不同领域的人。", 
                suggestions: ["选择需要广泛社交的职业，如销售、市场", "考虑行业协会、商会等组织", "寻找跨部门协作多的工作"] 
            },
            兴趣满足: { 
                description: "您希望工作能够符合自己的兴趣爱好，做自己喜欢的事情。", 
                suggestions: ["选择与自己兴趣相关的职业", "考虑创意产业、文化艺术等领域", "寻找能够发挥个人特长的工作"] 
            },
            助人利他: { 
                description: "您希望通过工作帮助他人，为社会做出贡献。", 
                suggestions: ["选择教育、医疗、公益等职业", "考虑社会工作者、志愿者组织", "寻找有社会责任感的企业"] 
            },
            持续挑战: { 
                description: "您喜欢富有挑战性的工作，不满足于一成不变的任务。", 
                suggestions: ["选择新兴行业、高科技领域", "考虑管理咨询、投资银行等高强度工作", "寻找需要解决复杂问题的职业"] 
            },
            多样变化: { 
                description: "您喜欢工作内容多样化，不喜欢单调重复的任务。", 
                suggestions: ["选择项目制工作，如项目管理", "考虑媒体、广告等创意行业", "避免流水线、重复性工作"] 
            },
            收入待遇: { 
                description: "您重视工作的收入待遇，希望获得高薪和良好的福利。", 
                suggestions: ["选择金融、IT等高薪行业", "考虑销售、业务等有提成的职业", "寻找有完善福利体系的企业"] 
            },
            开拓创造: { 
                description: "您喜欢开拓新领域，创造新事物，不喜欢墨守成规。", 
                suggestions: ["选择初创公司、创业团队", "考虑研发、设计等创造性工作", "寻找鼓励创新的企业"] 
            },
            人际和谐: { 
                description: "您重视工作中的人际关系和谐，希望与同事友好相处。", 
                suggestions: ["选择企业文化和谐的企业", "考虑团队协作多的工作", "避免竞争激烈、人际关系紧张的行业"] 
            },
            管理权力: { 
                description: "您希望在工作中拥有管理权力，能够领导和影响他人。", 
                suggestions: ["选择管理岗位或有晋升机会的职业", "考虑创业或自主经营", "寻找重视领导力发展的企业"] 
            }
        };

        // 测评题目库
        const questions = [
            // 主测题（第1-16题）
            { 
                type: "main", 
                text: "我希望工作不要长期占用我的私人时间，能让我兼顾家庭、休息与个人生活。", 
                value: "平衡生活"
            },
            { 
                type: "main", 
                text: "在工作中，我更愿意自己决定做事方式，而不是严格按照上级指令执行。", 
                value: "独立自主"
            },
            { 
                type: "main", 
                text: "我会优先选择能让我不断学习新技能、提升能力和职业层级的工作。", 
                value: "成长发展"
            },
            { 
                type: "main", 
                text: "相比变化和不确定性，我更看重一份长期稳定、可预期的工作。", 
                value: "工作稳定"
            },
            { 
                type: "main", 
                text: "当我的工作成果被他人看见、表扬或肯定时，我会获得很强的成就感。", 
                value: "他人认可"
            },
            { 
                type: "main", 
                text: "我非常在意组织是否公平对待员工，是否\"付出与回报相匹配\"。", 
                value: "公平公正"
            },
            { 
                type: "main", 
                text: "良好的办公条件、安全感和舒适的工作环境，会显著影响我对工作的满意度。", 
                value: "工作环境"
            },
            { 
                type: "main", 
                text: "我希望工作能让我接触更多人，建立对未来有帮助的人际关系网络。", 
                value: "人际拓展"
            },
            { 
                type: "main", 
                text: "如果一份工作内容本身让我感兴趣，我愿意为它投入更多精力。", 
                value: "兴趣满足"
            },
            { 
                type: "main", 
                text: "我希望我的工作能对他人或社会产生积极影响，而不仅仅是完成任务。", 
                value: "助人利他"
            },
            { 
                type: "main", 
                text: "我更喜欢有难度、有压力、需要不断解决新问题的工作。", 
                value: "持续挑战"
            },
            { 
                type: "main", 
                text: "相比长期做同一类事情，我更偏好内容多变、角色灵活的工作。", 
                value: "多样变化"
            },
            { 
                type: "main", 
                text: "薪资、福利和物质回报在我的职业选择中占据非常重要的位置。", 
                value: "收入待遇"
            },
            { 
                type: "main", 
                text: "我希望从事需要创新、创造新事物或新模式的工作。", 
                value: "开拓创造"
            },
            { 
                type: "main", 
                text: "我重视团队氛围，希望与同事、上级保持和谐的关系。", 
                value: "人际和谐"
            },
            { 
                type: "main", 
                text: "我希望在组织中拥有一定的管理权或对决策产生影响的能力。", 
                value: "管理权力"
            },
            
            // 综合校准题（第17-25题）
            { 
                type: "calibration", 
                text: "即使一份工作收入很高，但长期加班、私人时间严重受限，我也很难接受。", 
                relations: [{前置: "平衡生活", 对立: "收入待遇"}, {前置: "平衡生活", 对立: "工作稳定"}]
            },
            { 
                type: "calibration", 
                text: "如果一份工作内容非常有挑战性，但前景不确定、风险较高，我依然愿意尝试。", 
                relations: [{前置: "持续挑战", 对立: "工作稳定"}, {前置: "成长发展", 对立: "工作稳定"}]
            },
            { 
                type: "calibration", 
                text: "与其在关系紧张但回报丰厚的团队工作，我更愿意选择氛围融洽、关系简单的团队。", 
                relations: [{前置: "人际和谐", 对立: "收入待遇"}, {前置: "人际和谐", 对立: "他人认可"}]
            },
            { 
                type: "calibration", 
                text: "即使短期内得不到认可，只要我认为事情有意义，我也愿意坚持做下去。", 
                relations: [{前置: "助人利他", 对立: "他人认可"}]
            },
            { 
                type: "calibration", 
                text: "当组织制度不公平时，即使个人利益不受影响，我也会感到难以接受。", 
                relations: [{前置: "公平公正", 对立: "工作稳定"}]
            },
            { 
                type: "calibration", 
                text: "我更享受\"把一件事做到非常专业\"，而不是频繁切换不同任务。", 
                relations: [{前置: "成长发展", 对立: "多样变化"}]
            },
            { 
                type: "calibration", 
                text: "如果没有足够的自主空间，即使工作稳定、待遇不错，我也会感到受限。", 
                relations: [{前置: "独立自主", 对立: "工作稳定"}, {前置: "独立自主", 对立: "收入待遇"}]
            },
            { 
                type: "calibration", 
                text: "能否让我发挥创造力，比是否有明确流程和规范对我更重要。", 
                relations: [{前置: "开拓创造", 对立: "工作稳定"}, {前置: "开拓创造", 对立: "公平公正"}]
            },
            { 
                type: "calibration", 
                text: "如果未来有机会承担管理责任，即使压力更大，我也愿意尝试。", 
                relations: [{前置: "管理权力", 对立: "平衡生活"}, {前置: "管理权力", 对立: "持续挑战"}]
            }
        ];

        // 校准因子定义
        const calibrationFactors = {
            "平衡生活": 1,
            "独立自主": 1,
            "成长发展": 1,
            "工作稳定": 1,
            "他人认可": 1,
            "公平公正": 1,
            "工作环境": 1,
            "人际拓展": 1,
            "兴趣满足": 1,
            "助人利他": 1,
            "持续挑战": 1,
            "多样变化": 1,
            "收入待遇": 1,
            "开拓创造": 1,
            "人际和谐": 1,
            "管理权力": 1
        };

        // 全局变量
        let currentQuestion = 0;
        let answers = [];
        let rawScores = {};

        // 初始化分数
        function initScores() {
            for (let value in values) {
                rawScores[value] = 0;
            }
        }

        // 开始测评
        function startQuiz() {
            initScores();
            answers = new Array(questions.length).fill(null);
            currentQuestion = 0;
            document.getElementById('welcomePage').style.display = 'none';
            document.getElementById('quizPage').style.display = 'block';
            loadQuestion();
        }

        // 加载题目
        function loadQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionNumber').textContent = `第${currentQuestion + 1}题 / 共${questions.length}题`;
            document.getElementById('questionText').textContent = question.text;
            
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = `
                <div class="rating-scale">
                    <div class="rating-label agree">符合</div>
                    <div class="rating-buttons" id="ratingButtons"></div>
                    <div class="rating-label disagree">不符合</div>
                </div>
            `;
            
            const ratingButtons = document.getElementById('ratingButtons');
            
            // 创建7个评分按钮，从左到右为7-1
            const scores = [7, 6, 5, 4, 3, 2, 1];
            scores.forEach(score => {
                const btn = document.createElement('button');
                btn.className = 'rating-btn';
                btn.dataset.score = score;
                if (answers[currentQuestion] === score) {
                    btn.classList.add('selected');
                }
                btn.onclick = () => selectRating(score);
                ratingButtons.appendChild(btn);
            });
            
            // 更新进度条
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            
            // 更新按钮文本
            const nextBtn = document.getElementById('nextBtn');
            if (currentQuestion === questions.length - 1) {
                nextBtn.textContent = '提交';
            } else {
                nextBtn.textContent = '下一题';
            }
        }

        // 选择评分
        function selectRating(score) {
            // 移除之前的选中状态
            document.querySelectorAll('.rating-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // 添加当前选中状态
            const buttons = document.querySelectorAll('.rating-btn');
            const index = [7, 6, 5, 4, 3, 2, 1].indexOf(score);
            if (index !== -1) {
                buttons[index].classList.add('selected');
            }
            
            answers[currentQuestion] = score;
        }

        // 上一题
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }

        // 下一题或提交
        function nextQuestion() {
            if (answers[currentQuestion] === null) {
                alert('请选择一个选项');
                return;
            }
            
            if (currentQuestion === questions.length - 1) {
                // 提交按钮点击动画
                const btn = document.getElementById('nextBtn');
                btn.style.animation = 'pulse 0.5s ease';
                setTimeout(() => {
                    btn.style.animation = '';
                    calculateResult();
                }, 500);
            } else {
                currentQuestion++;
                loadQuestion();
            }
        }

        // 计算结果
        function calculateResult() {
            // 第一步：计算主测原始分
            for (let i = 0; i < 16; i++) {
                const question = questions[i];
                const score = answers[i];
                if (score !== null) {
                    rawScores[question.value] = score;
                }
            }
            
            // 第二步：计算校准因子
            // 重置校准因子
            const factors = {...calibrationFactors};
            
            for (let i = 16; i < questions.length; i++) {
                const question = questions[i];
                const score = answers[i];
                if (score !== null) {
                    if (score >= 6) {
                        // 前置价值上调+10%，对立价值下调-10%
                        question.relations.forEach(relation => {
                            factors[relation.前置] *= 1.1;
                            factors[relation.对立] *= 0.9;
                        });
                    } else if (score <= 2) {
                        // 前置价值下调-10%，对立价值上调+10%
                        question.relations.forEach(relation => {
                            factors[relation.前置] *= 0.9;
                            factors[relation.对立] *= 1.1;
                        });
                    }
                    // 得分3-5：不调整
                }
            }
            
            // 第三步：计算最终标准分
            const finalScores = {};
            let minScore = Infinity;
            let maxScore = -Infinity;
            
            // 计算原始最终分
            for (let value in rawScores) {
                finalScores[value] = rawScores[value] * factors[value];
                minScore = Math.min(minScore, finalScores[value]);
                maxScore = Math.max(maxScore, finalScores[value]);
            }
            
            // 映射到0-100分区间
            const mappedScores = {};
            for (let value in finalScores) {
                if (maxScore === minScore) {
                    mappedScores[value] = 50;
                } else {
                    mappedScores[value] = Math.round(((finalScores[value] - minScore) / (maxScore - minScore)) * 100);
                }
            }
            
            // 第四步：生成测评结果
            const sortedValues = Object.entries(mappedScores)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 3);
            
            // 显示结果
            showResult(sortedValues);
        }

        // 显示结果
        function showResult(topValues) {
            document.getElementById('quizPage').style.display = 'none';
            document.getElementById('resultPage').style.display = 'block';
            
            const valuesList = document.getElementById('valuesList');
            valuesList.innerHTML = '';
            
            topValues.forEach(([valueName, score], index) => {
                const value = values[valueName];
                const valueItem = document.createElement('div');
                valueItem.className = 'value-item';
                valueItem.innerHTML = `
                    <div class="value-name">${index + 1}. ${valueName}</div>
                    <div class="value-score">得分：${score}</div>
                    <div class="value-description">${value.description}</div>
                    <div class="value-suggestions">
                        <div class="suggestion-title">职业发展建议：</div>
                        <ul class="suggestion-list">
                            ${value.suggestions.map(suggestion => `<li>${suggestion}</li>`).join('')}
                        </ul>
                    </div>
                `;
                valuesList.appendChild(valueItem);
            });
        }

        // 重新测评
        function restartQuiz() {
            document.getElementById('resultPage').style.display = 'none';
            document.getElementById('welcomePage').style.display = 'block';
        }
    </script>
</body>
</html>